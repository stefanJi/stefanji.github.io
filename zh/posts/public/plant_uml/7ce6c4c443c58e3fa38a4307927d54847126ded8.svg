<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="421px" preserveAspectRatio="none" style="width:895px;height:421px;" version="1.1" viewBox="0 0 895 421" width="895px" zoomAndPan="magnify"><defs><filter height="300%" id="fb392zx" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="41" x2="41" y1="38.4883" y2="382.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="198" x2="198" y1="38.4883" y2="382.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="486.5" x2="486.5" y1="38.4883" y2="382.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="645" x2="645" y1="38.4883" y2="382.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="728" x2="728" y1="38.4883" y2="382.5938"/><rect fill="#FEFECE" filter="url(#fb392zx)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="15" y="23.5352">Service</text><rect fill="#FEFECE" filter="url(#fb392zx)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="8" y="381.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="15" y="402.1289">Service</text><rect fill="#FEFECE" filter="url(#fb392zx)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="141" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="148" y="23.5352">app_main.cpp</text><rect fill="#FEFECE" filter="url(#fb392zx)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="141" y="381.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="148" y="402.1289">app_main.cpp</text><rect fill="#FEFECE" filter="url(#fb392zx)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="421.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="428.5" y="23.5352">AndroidRuntime</text><rect fill="#FEFECE" filter="url(#fb392zx)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="421.5" y="381.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="428.5" y="402.1289">AndroidRuntime</text><rect fill="#FEFECE" filter="url(#fb392zx)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="615" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="622" y="23.5352">JNIEnv</text><rect fill="#FEFECE" filter="url(#fb392zx)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="615" y="381.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="622" y="402.1289">JNIEnv</text><rect fill="#FEFECE" filter="url(#fb392zx)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="685" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="692" y="23.5352">ZygoteInit</text><rect fill="#FEFECE" filter="url(#fb392zx)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="685" y="381.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="692" y="402.1289">ZygoteInit</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="41" x2="83" y1="69.7988" y2="69.7988"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="83" x2="83" y1="69.7988" y2="82.7988"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="83" y1="82.7988" y2="82.7988"/><polygon fill="#A80036" points="52,78.7988,42,82.7988,52,86.7988,48,82.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="48" y="65.0566">Start</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="41" x2="83" y1="112.1094" y2="112.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="83" x2="83" y1="112.1094" y2="125.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="83" y1="125.1094" y2="125.1094"/><polygon fill="#A80036" points="52,121.1094,42,125.1094,52,129.1094,48,125.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="48" y="107.3672">fork</text><polygon fill="#FBFB77" filter="url(#fb392zx)" points="91,97.2988,91,122.2988,324,122.2988,324,107.2988,314,97.2988,91,97.2988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314" x2="314" y1="97.2988" y2="107.2988"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="314" y1="107.2988" y2="107.2988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="97" y="114.8672">fork 进程，接下来的操作在子进程中</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="41" x2="83" y1="168.2305" y2="168.2305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="83" x2="83" y1="168.2305" y2="181.2305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="83" y1="181.2305" y2="181.2305"/><polygon fill="#A80036" points="52,177.2305,42,181.2305,52,185.2305,48,181.2305" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="48" y="163.4883">ExpandArgsAndExecve</text><polygon fill="#FBFB77" filter="url(#fb392zx)" points="203,138.1094,203,193.1094,464,193.1094,464,148.1094,454,138.1094,203,138.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="454" x2="454" y1="138.1094" y2="148.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464" x2="454" y1="148.1094" y2="148.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="209" y="155.6777">调用 execve 执行 zygote service 的程序</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="213" y="170.9883">system/bin/app_process64</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="209" y="186.2988">其对应源码为app_main.cpp</text><polygon fill="#A80036" points="186,220.041,196,224.041,186,228.041,190,224.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41" x2="192" y1="224.041" y2="224.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="48" y="219.6094">main</text><polygon fill="#A80036" points="475,249.3516,485,253.3516,475,257.3516,479,253.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="481" y1="253.3516" y2="253.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265" x="205" y="248.9199">start("com.android.internal.os.ZygoteInit")</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="487" x2="529" y1="282.9727" y2="282.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="529" x2="529" y1="282.9727" y2="295.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="488" x2="529" y1="295.9727" y2="295.9727"/><polygon fill="#A80036" points="498,291.9727,488,295.9727,498,299.9727,494,295.9727" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="494" y="278.2305">startVM</text><polygon fill="#FBFB77" filter="url(#fb392zx)" points="554,268.1621,554,293.1621,628,293.1621,628,278.1621,618,268.1621,554,268.1621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="618" x2="618" y1="268.1621" y2="278.1621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="628" x2="618" y1="278.1621" y2="278.1621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="560" y="285.7305">启动 JVM</text><polygon fill="#A80036" points="633,325.9727,643,329.9727,633,333.9727,637,329.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="487" x2="639" y1="329.9727" y2="329.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="494" y="325.541">CallStaticVoidMethod</text><polygon fill="#FBFB77" filter="url(#fb392zx)" points="650,308.9727,650,333.9727,886,333.9727,886,318.9727,876,308.9727,650,308.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="876" x2="876" y1="308.9727" y2="318.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="886" x2="876" y1="318.9727" y2="318.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="656" y="326.541">调用 ZygoteInit 类的静态方法: main</text><polygon fill="#A80036" points="716,360.2832,726,364.2832,716,368.2832,720,364.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="645" x2="722" y1="364.2832" y2="364.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="652" y="359.8516">main</text></g></svg>